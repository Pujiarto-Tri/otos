{% extends 'base.html' %}
{% load humanize %}
{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-8">
    {% if user.is_authenticated %}
        <!-- Welcome Header -->
        {% include 'components/welcome_header.html' with user=user %}

        {% include 'components/broadcast_alerts.html' with broadcasts=broadcast_messages %}

        <!-- Role-Based Dashboard Content -->
        {% if user.is_visitor %}
            {% include 'dashboards/visitor_dashboard.html' %}
        {% elif user.is_student %}
            {% include 'dashboards/student_dashboard.html' %}
        {% elif user.role.role_name == 'Teacher' %}
            {% include 'dashboards/teacher_dashboard.html' %}
        {% elif user.role.role_name == 'Operator' %}
            {% include 'dashboards/operator_dashboard.html' %}
        {% elif user.role.role_name == 'Admin' %}
            {% include 'dashboards/admin_dashboard.html' %}
        {% endif %}
    {% else %}
        <!-- Not logged in - show public home -->
        {% include 'components/public_home.html' with featured_packages=featured_packages %}
    {% endif %}
</div>

<!-- Modals and Scripts -->
{% include 'components/modals_and_scripts.html' with ongoing_test=ongoing_test operator_stats=operator_stats %}
{% endblock %}
